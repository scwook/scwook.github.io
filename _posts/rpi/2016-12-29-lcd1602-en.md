---
layout: post
title: "16x2 Character LCD Test"
show: true
language:
  - en
  - kr
categories: RaspberryPi
---
The Wiring Pi provides [Device Driver Library](http://wiringpi.com/dev-lib/) to support some hardware. In this post, we will test to show current time on 16x2 Character LCD that is based on the Hitachi HD44780U controller.
### Component

* Raspberry Pi 2 Model B
* [LCD1620](http://www.waveshare.com/lcd1602-blue.htm)
* Resistor 1~2kâ„¦

![LCD1620 Test Circuit]({{site.url}}/images/rpi_lcd1602_test.png)

### Source Code

filename: lcd1602Test.c

{% highlight c linenos %}
#include <stdio.h>
#include <wiringPi.h>
#include <lcd.h>
#include <time.h>

#define TRUE 1
#define FALSE 0

int main(void)
{
  if(wiringPiSetup() == -1)
  {
    printf("Unable to start wiringPi\n");
    return 1;
  }

  int fd;

  fd = lcdInit(2, 16, 4, 4,5, 0,1,2,3,0,0,0,0);

  printf("%d\n", fd);

  lcdHome(fd);
  lcdCursor(fd, TRUE);
  lcdCursorBlink(fd, FALSE);

  struct tm *t;
  time_t timer;

  while(TRUE)
  {
    timer = time(NULL);
    t = localtime(&timer);

    lcdPosition(fd, 0,0);
    lcdPrintf(fd, "%4d.%02d.%02d", t->tm_year+1900, t->tm_mon+1, t->tm_mday);

    lcdPosition(fd, 0,1);
    lcdPrintf(fd, "%02d:%02d:%02d", t->tm_hour, t->tm_min, t->tm_sec);

    delay(100);
  }
  return 0;
}
{% endhighlight %}

Compile and run the program

{% highlight shell %}
pi@raspberrypi ~$ gcc -o lcd1602Test lcd1602Test.c -lwiringPi -lwiringPiDev
pi@raspberrypi ~$ sudo ./lcd1602Test
{% endhighlight %}


